## @section Keycloak Configuration
keycloak:
  # -- Keycloak image tag
  imageTag: "24.0"
  # -- Secret name containing Keycloak admin credentials (must contain: username, password, hostname)
  secretName: "keycloak-admin"
  # -- Realm to backup (defaults to all realms if not specified)
  realm: "master"
  # -- Keycloak hostname (for internal access within cluster)
  hostname: "keycloak"

## @section S3 Storage Configuration
s3:
  # -- S3 endpoint URL (empty for AWS S3, set for MinIO/Ceph/Localstack)
  endpoint: ""
  # -- S3 prefix/path within bucket
  prefix: ""
  # -- Secret name containing S3 credentials
  secretName: "keycloak-s3"

## @section Backup Schedule
# -- CronJob schedule (default: daily at 2 AM)
schedule: "0 2 * * *"

## @section Backup CronJob
cronjob:
  # -- Enable scheduled backup CronJob
  enabled: true
  # -- Concurrency policy (Forbid, Replace, Allow)
  concurrencyPolicy: "Forbid"
  # -- Number of successful jobs to keep
  successfulJobsHistoryLimit: 3
  # -- Number of failed jobs to keep
  failedJobsHistoryLimit: 3
  # -- AWS CLI image tag
  awsCliImageTag: "2.17.0"
  # -- Pod security context
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
  # -- Exporter container security context
  exporterSecurityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop:
        - ALL
  # -- Uploader container security context
  uploaderSecurityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    capabilities:
      drop:
        - ALL
  # -- Resources
  resources:
    exporter:
      requests:
        cpu: "100m"
        memory: "512Mi"
      limits:
        cpu: "1000m"
        memory: "1Gi"
    uploader:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits:
        cpu: "200m"
        memory: "256Mi"
