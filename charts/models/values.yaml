gatewayRef:
  name: ai-gateway

envoyRateLimit:
  enabled: true

backendTrafficPolicy:
  enabled: true
  name: backend-retry-policy
  labels: {}
  annotations: {}
  targetRefs:
    - group: gateway.networking.k8s.io
      kind: Gateway
      name: ai-gateway
  retry:
    numRetries: 3
    perRetry:
      backOff:
        baseInterval: 100ms
        maxInterval: 10s
      timeout: 30s
    retryOn:
      httpStatusCodes:
        - 500
        - 502
        - 503
        - 504
        - 404
      triggers:
        - connect-failure
        - retriable-status-codes

backends:
  fw-01:
    enabled: true
    resourceName: fw-backend-01-svc
    schema: OpenAI
    prefix: /inference/v1
    fqdn:
      hostname: api.fireworks.ai
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: fireworks-api-key-01
    tlsHostname: api.fireworks.ai
  fw-02:
    enabled: true
    resourceName: fw-backend-02-svc
    schema: OpenAI
    prefix: /inference/v1
    fqdn:
      hostname: api.fireworks.ai
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: fireworks-api-key-02
    tlsHostname: api.fireworks.ai
  openai-01:
    enabled: true
    resourceName: openai-backend-01-svc
    schema: OpenAI
    fqdn:
      hostname: api.openai.com
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: openai-api-key-01
    tlsHostname: api.openai.com
  openai-02:
    enabled: true
    resourceName: openai-backend-02-svc
    schema: OpenAI
    fqdn:
      hostname: api.openai.com
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: openai-api-key-02
    tlsHostname: api.openai.com
  vertex-ai-01:
    enabled: true
    resourceName: vertex-ai-backend-01-svc
    schema: GCPVertexAI
    fqdn:
      hostname: us-central1-aiplatform.googleapis.com
      port: 443
    type: GCPCredentials
    gcpCredentials:
      projectName: kivoyo
      region: us-central1
      credentialsFile:
        secretRef:
          name: gcp-service-account-key-01
    tlsHostname: us-central1-aiplatform.googleapis.com
  vertex-ai-02:
    enabled: true
    resourceName: vertex-ai-backend-02-svc
    schema: GCPVertexAI
    fqdn:
      hostname: us-central1-aiplatform.googleapis.com
      port: 443
    type: GCPCredentials
    gcpCredentials:
      projectName: kivoyo
      region: us-central1
      credentialsFile:
        secretRef:
          name: gcp-service-account-key-02
    tlsHostname: us-central1-aiplatform.googleapis.com
  google-ai-studio-01:
    enabled: true
    resourceName: google-ai-studio-backend-01-svc
    schema: OpenAI
    prefix: v1beta/openai    
    fqdn:
      hostname: generativelanguage.googleapis.com
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: google-ai-studio-api-key-01
    tlsHostname: generativelanguage.googleapis.com
  google-ai-studio-02:
    enabled: true
    resourceName: google-ai-studio-backend-02-svc
    schema: OpenAI
    prefix: v1beta/openai
    fqdn:
      hostname: generativelanguage.googleapis.com
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: google-ai-studio-api-key-02
    tlsHostname: generativelanguage.googleapis.com
  anthropic-01:
    enabled: true
    resourceName: anthropic-backend-01-svc
    schema: OpenAI
    prefix: v1/messages
    fqdn:
      hostname: api.anthropic.com
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: anthropic-api-key-01
    tlsHostname: api.anthropic.com
  anthropic-02:
    enabled: true
    resourceName: anthropic-backend-02-svc
    schema: OpenAI
    prefix: v1/messages
    fqdn:
      hostname: api.anthropic.com
      port: 443
    securityType: APIKey
    useEnvVars: true
    envSecretRef:
      name: anthropic-api-key-02
    tlsHostname: api.anthropic.com

models:
  # Fireworks AI Models
  qwen3-coder-480b-a35b-instruct:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/qwen3-coder-480b-a35b-instruct"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/qwen3-coder-480b-a35b-instruct"
        priority: 1

  kimi-k2-instruct-0905:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/kimi-k2-instruct-0905"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/kimi-k2-instruct-0905"
        priority: 1

  kimi-k2-thinking:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/kimi-k2-thinking"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/kimi-k2-thinking"
        priority: 1

  deepseek-v3p1:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/deepseek-v3p1"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/deepseek-v3p1"
        priority: 1

  qwen3-235b-a22b-instruct-2507:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/qwen3-235b-a22b-instruct-2507"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/qwen3-235b-a22b-instruct-2507"
        priority: 1

  llama4-maverick-instruct-basic:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/llama4-maverick-instruct-basic" 
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/llama4-maverick-instruct-basic"
        priority: 1

  llama-v3p1-8b-instruct:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/llama-v3p1-8b-instruct"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/llama-v3p1-8b-instruct"
        priority: 1

  gpt-oss-120b:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/gpt-oss-120b"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/gpt-oss-120b"
        priority: 1

  gpt-oss-20b:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/gpt-oss-20b"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/gpt-oss-20b"
        priority: 1

  qwen3-235b-a22b-thinking-2507:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/qwen3-235b-a22b-thinking-2507"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/qwen3-235b-a22b-thinking-2507"
        priority: 1

  qwen3-coder-30b-a3b-instruct:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/qwen3-coder-30b-a3b-instruct"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/qwen3-coder-30b-a3b-instruct"
        priority: 1

  qwen3-30b-a3b:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/qwen3-30b-a3b"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/qwen3-30b-a3b"
        priority: 1

  qwen3-235b-a22b:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/qwen3-235b-a22b"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/qwen3-235b-a22b"
        priority: 1

  glm-4p6:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/glm-4p6"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/glm-4p6"
        priority: 1

  glm-4p5:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/glm-4p5"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/glm-4p5"
        priority: 1

  deepseek-v3p1-terminus:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      fw-01:
        enabled: true
        ref: fw-01
        modelNameOverride: "accounts/fireworks/models/deepseek-v3p1-terminus"
        priority: 0
      fw-02:
        enabled: true
        ref: fw-02
        modelNameOverride: "accounts/fireworks/models/deepseek-v3p1-terminus"
        priority: 1

  # Anthropic Models
  claude-sonnet-4:
    enabled: true
    envoyRateLimit:
      requests: 30000
      unit: Minute
    backends:
      anthropic-01:
        enabled: true
        ref: anthropic-01
        modelNameOverride: "claude-sonnet-4-20250514" 
        priority: 0
      anthropic-02:
        enabled: true
        ref: anthropic-02
        modelNameOverride: "claude-sonnet-4-20250514"
        priority: 1

  # OpenAI Models
  o4-mini:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "o4-mini"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "o4-mini"
        priority: 1

  o4-mini-deep-research:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "o4-mini-deep-research"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "o4-mini-deep-research"
        priority: 1

  gpt-4-1:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-4.1"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-4.1"
        priority: 1

  gpt-4-1-mini:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-4.1-mini"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-4.1-mini"
        priority: 1

  gpt-5:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-5"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-5"
        priority: 1

  gpt-5-mini:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-5-mini"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-5-mini"
        priority: 1

  gpt-5-nano:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-5-nano"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-5-nano"
        priority: 1

  codex-mini-latest:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "codex-mini-latest"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "codex-mini-latest"
        priority: 1

  text-embedding-3-large:
    enabled: true
    envoyRateLimit:
      requests: 10000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "text-embedding-3-large"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "text-embedding-3-large"
        priority: 1

  dall-e-3:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "dall-e-3"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "dall-e-3"
        priority: 1

  gpt-image-1:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-image-1"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-image-1"
        priority: 1

  whisper-1:
    enabled: true
    envoyRateLimit:
      requests: 10000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "whisper-1"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "whisper-1"
        priority: 1

  gpt-4o-mini-audio:
    enabled: true
    envoyRateLimit:
      requests: 10000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-4o-mini-audio-preview-2024-12-17"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-4o-mini-audio-preview-2024-12-17"
        priority: 1

  gpt-4o-transcribe:
    enabled: true
    envoyRateLimit:
      requests: 10000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-4o-transcribe"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-4o-transcribe"
        priority: 1

  gpt-4o-mini-tts:
    enabled: true
    envoyRateLimit:
      requests: 10000
      unit: Minute
    backends:
      openai-01:
        enabled: true
        ref: openai-01
        modelNameOverride: "gpt-4o-mini-tts"
        priority: 0
      openai-02:
        enabled: true
        ref: openai-02
        modelNameOverride: "gpt-4o-mini-tts"
        priority: 1

  # Google Gemini Models
  gemini-2-5-flash:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      vertex-ai-01:
        enabled: true
        ref: vertex-ai-01
        modelNameOverride: "gemini-2.5-flash"
        priority: 0
      vertex-ai-02:
        enabled: true
        ref: vertex-ai-02
        modelNameOverride: "gemini-2.5-flash"
        priority: 1

  gemini-2-5-pro-reasoning:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      vertex-ai-01:
        enabled: true
        ref: vertex-ai-01
        modelNameOverride: "gemini-2.5-pro"
        priority: 0
      vertex-ai-02:
        enabled: true
        ref: vertex-ai-02
        modelNameOverride: "gemini-2.5-pro"
        priority: 1

  gemini-2-5-pro-reasoning-1024:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      vertex-ai-01:
        enabled: true
        ref: vertex-ai-01
        modelNameOverride: "gemini-2.5-pro"
        priority: 0
      vertex-ai-02:
        enabled: true
        ref: vertex-ai-02
        modelNameOverride: "gemini-2.5-pro"
        priority: 1

  gemini-2-5-pro-reasoning-4096:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      vertex-ai-01:
        enabled: true
        ref: vertex-ai-01
        modelNameOverride: "gemini-2.5-pro"
        priority: 0
      vertex-ai-02:
        enabled: true
        ref: vertex-ai-02
        modelNameOverride: "gemini-2.5-pro"
        priority: 1

  gemini-2-5-flash-lite:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      vertex-ai-01:
        enabled: true
        ref: vertex-ai-01
        modelNameOverride: "gemini-2.5-flash-lite"
        priority: 0
      vertex-ai-02:
        enabled: true
        ref: vertex-ai-02
        modelNameOverride: "gemini-2.5-flash-lite"
        priority: 1

  gemini-3-pro:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      google-ai-studio-01:
        enabled: true
        ref: google-ai-studio-01
        modelNameOverride: "gemini-3-pro-preview"
        priority: 0
      google-ai-studio-02:
        enabled: true
        ref: google-ai-studio-02
        modelNameOverride: "gemini-3-pro-preview"
        priority: 1

  gemini-3-flash:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      google-ai-studio-01:
        enabled: true
        ref: google-ai-studio-01
        modelNameOverride: "gemini-3-flash-preview"
        priority: 0
      google-ai-studio-02:
        enabled: true
        ref: google-ai-studio-02
        modelNameOverride: "gemini-3-flash-preview"
        priority: 1

  gemini-3-flash-thinking:
    enabled: true
    envoyRateLimit:
      requests: 50000
      unit: Minute
    backends:
      google-ai-studio-01:
        enabled: true
        ref: google-ai-studio-01
        modelNameOverride: "gemini-3-flash-preview"
        priority: 0
      google-ai-studio-02:
        enabled: true
        ref: google-ai-studio-02
        modelNameOverride: "gemini-3-flash-preview"
        priority: 1
